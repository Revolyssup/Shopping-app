(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{43:function(e,t,a){e.exports=a(79)},48:function(e,t,a){},49:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(24),l=a.n(c),o=(a(48),a(2)),u=(a(49),a(3)),s=a(10),i=Object(u.b)((function(e){return{cart:e.cart}}),null)((function(e){return r.a.createElement("nav",{className:"NavBar-Wrapper"},r.a.createElement("div",null,r.a.createElement(s.b,{to:"/"},r.a.createElement("p",{className:"shop"},"Shop"))),r.a.createElement(s.b,{to:"/cart"},r.a.createElement("div",{className:"Cart-Info"},r.a.createElement("span",{className:"Cart-Item-Counter"},e.cart.length),r.a.createElement("i",{className:"fa fa-shopping-bag"}),r.a.createElement("p",null,"Cart: $",function(e){var t=e.reduce((function(e,t){return e+t.price*t.quantity}),0);return console.log("ans",t),t}(e.cart)))))})),p=a(13),m=a(14),d=a(17),E=a(18),f=a(20),h=a(19),b=a(12),v=a.n(b),y=function(e,t){return console.log(e),{type:"ADD_TO_CART",payload:e,index:t}},O=function(e){return r.a.createElement("div",null,r.a.createElement("h1",{className:"recieved"},"All previous orders recieved"),r.a.createElement("h2",{className:"back"},"You have nothing in cart."))},g=(a(72),function(e){Object(f.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).emptycart=function(t){e.props.cred.orders?v.a.post("/api/orders",Object(m.a)(Object(m.a)({},e.props.cred),{},{orders:[].concat(Object(p.a)(e.props.cred.orders),Object(p.a)(e.props.cart))}),{headers:{"x-token":e.props.cred.accessToken}}):v.a.post("/api/orders",Object(m.a)(Object(m.a)({},e.props.cred._doc.orders),{},{orders:[].concat(Object(p.a)(e.props.cred._doc.orders),Object(p.a)(e.props.cart))}),{headers:{"x-token":e.props.cred.accessToken}}),e.props.emptyCart()},e}return Object(E.a)(a,[{key:"componentDidMount",value:function(){console.log(this.props.cart)}},{key:"render",value:function(){if(!this.props.cart.length)return r.a.createElement(O,null);var e=this.props.cart.map((function(e){return r.a.createElement("tr",null,r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.price),r.a.createElement("td",null,e.quantity))}));return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h1",{className:"Checkout-Title"},"Your Order"),r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Name"),r.a.createElement("td",null,"Price"),r.a.createElement("td",null,"quantity"))),r.a.createElement("tbody",null,e))),r.a.createElement("button",{className:"button",onClick:this.emptycart},"Buy Now"))}}]),a}(n.Component)),C=Object(u.b)((function(e){return{cart:e.cart,cred:e.cred}}),{emptyCart:function(){return{type:"EMPTY_CART",payload:[]}}})(g),j=(a(73),a(74),function(e){return r.a.createElement(n.Fragment,null,r.a.createElement("tr",null,r.a.createElement("td",null," ",r.a.createElement("image",{className:"Cart-Item-Photo",src:e.photo,alt:e.name})," "),r.a.createElement("td",null,e.name),r.a.createElement("td",null,r.a.createElement("button",{onClick:e.addItem,className:"Quantity-Button"},"+"),r.a.createElement("span",null,e.quantity),r.a.createElement("button",{onClick:e.removeItem,className:"Quantity-Button"},"-")),r.a.createElement("td",null,e.price),r.a.createElement("td",{className:"fa fa-times",onClick:e.removeWholeItem,style:{color:"red",cursor:"pointer"}}," DELETE :(")))}),N=function(e){Object(f.a)(a,e);var t=Object(h.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(E.a)(a,[{key:"render",value:function(){var e=this;if(!this.props.cart.length)return r.a.createElement(O,null);var t,a=(t=this.props.cart,t.sort((function(e,t){return e._id<t._id}))).map((function(t,a){return r.a.createElement(j,Object.assign({key:a},t,{addItem:function(){return e.props.addToCart(t,a)},removeItem:function(){return e.props.deleteFromCart(t)},removeWholeItem:function(){return e.props.deleteWholeItem(t)}}))}));return r.a.createElement("div",null,r.a.createElement("h1",{className:"My-Cart-Title"},"My Cart"),r.a.createElement("div",{className:"Cart-Products-Wrapper"},r.a.createElement("table",{className:"Cart-Table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Photo"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Quantity"),r.a.createElement("th",null,"Price"))),r.a.createElement("tbody",null,a,r.a.createElement("tr",null,r.a.createElement("td",{style:{verticalAlign:0,paddingTop:"1rem",fontWeight:"bold"}},"Total"),r.a.createElement("td",null),r.a.createElement("td",null),r.a.createElement("td",null,r.a.createElement("p",{className:"Total-Price"},"$",this.props.cart.reduce((function(e,t){return e+t.price*t.quantity}),0)),r.a.createElement(s.b,{to:"/checkout",className:"Checkout-Button-Text"},r.a.createElement("div",{className:"Checkout-Button"},"Checkout"))))))))}}]),a}(n.Component),k=Object(u.b)((function(e){return{cart:e.cart}}),{addToCart:y,deleteFromCart:function(e){return{type:"REMOVE_FROM_CART",payload:e}},deleteWholeItem:function(e,t){return{type:"REMOVE_WHOLE_ITEM",payload:e}}})(N),T=a(9),_=a.n(T),x=a(15),w=a(21),P=Object(u.b)(null,{login:function(e,t){return function(){var a=Object(x.a)(_.a.mark((function a(n){var r,c;return _.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!t){a.next=13;break}return a.prev=1,a.next=4,v.a.post("/auth/signup",e);case 4:r=a.sent,n({type:"STORE_CRED",payload:r}),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),console.log(a.t0);case 11:a.next=23;break;case 13:return a.prev=13,a.next=16,v.a.post("/auth/login",e);case 16:c=a.sent,n({type:"STORE_CRED",payload:c}),a.next=23;break;case 20:a.prev=20,a.t1=a.catch(13),console.log(a.t1);case 23:case"end":return a.stop()}}),a,null,[[1,8],[13,20]])})));return function(e){return a.apply(this,arguments)}}()}})((function(e){var t=Object(o.f)(),a=Object(n.useState)(null),c=Object(w.a)(a,2),l=c[0],u=c[1],s=Object(n.useState)(null),i=Object(w.a)(s,2),p=i[0],m=i[1],d=Object(n.useState)(null),E=Object(w.a)(d,2),f=E[0],h=E[1],b=Object(n.useState)(null),v=Object(w.a)(b,2),y=v[0],O=v[1],g=Object(n.useState)(null),C=Object(w.a)(g,2),j=C[0],N=C[1],k=function(e){console.log("changed"),u(e.target.value)},T=function(e){h(e.target.value)},P=function(e){N(e.target.value)},R=function(){var a=Object(x.a)(_.a.mark((function a(n){var r;return _.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n.preventDefault(),r={name:l,email:p,address:f,phone:y,password:j},a.next=4,e.login(r,!0);case 4:t.push("/");case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),A=function(){var a=Object(x.a)(_.a.mark((function a(n){var r;return _.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n.preventDefault(),r={name:l,password:j},a.next=4,e.login(r,!1);case 4:t.push("/");case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"login"},r.a.createElement("h1",null,"Login"),r.a.createElement("form",null,r.a.createElement("input",{placeholder:"Enter Name",type:"text",onChange:k}),r.a.createElement("input",{placeholder:"Enter password",type:"password",onChange:P}),r.a.createElement("button",{className:"button",onClick:A}))),r.a.createElement("div",{className:"signup"},r.a.createElement("h1",null,"Signup"),r.a.createElement("form",null,r.a.createElement("input",{placeholder:"Enter name",type:"text",onChange:k}),r.a.createElement("input",{placeholder:"Enter Email-id",type:"text",onChange:function(e){m(e.target.value)}}),r.a.createElement("input",{placeholder:"Enter Address",type:"text",onChange:function(){return T}}),r.a.createElement("input",{placeholder:"Enter phone number",type:"text",onChange:function(e){O(e.target.value)}}),r.a.createElement("input",{placeholder:"Enter Password",type:"password",onChange:P}),r.a.createElement("button",{className:"button",onClick:R}))))})),R=(a(76),a(77),function(e){return r.a.createElement("div",{className:"Product-wrapper"},r.a.createElement("div",{className:"Product"},r.a.createElement("div",{className:"Product-image"},r.a.createElement("img",{src:e.photo})),r.a.createElement("div",{className:"Product-name"},e.name),r.a.createElement("div",{className:"Product-details"},r.a.createElement("small",{className:"price"},"$",e.price),r.a.createElement("button",{onClick:e.addToCart,className:"button"},"Add to Cart"))))}),A=Object(u.b)((function(e){return{cart:e.cart}}),{addToCart:y})((function(e){var t=e.products.map((function(t,a){return r.a.createElement(R,Object.assign({key:t._id},t,{addToCart:function(){return e.addToCart(t,a)}}))}));return r.a.createElement("div",null,r.a.createElement("h1",null,"Happy shopping!!"),r.a.createElement("div",{className:"Products-container"},r.a.createElement("div",{className:"Products-wrapper"},t)))})),D=function(e){Object(f.a)(a,e);var t=Object(h.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(E.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.cred;console.log(e.accessToken),this.props.fetchProducts(e.accessToken)}},{key:"render",value:function(){return r.a.createElement("main",null,r.a.createElement(A,{products:this.props.products}))}}]),a}(n.Component),I=Object(u.b)((function(e){return{products:e.products,cred:e.cred}}),{fetchProducts:function(e){return function(){var t=Object(x.a)(_.a.mark((function t(a){var n;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log(e),t.next=4,v.a.get("/api/products",{headers:{"X-token":e}});case 4:n=t.sent,console.log(n.data.products),a({type:"FETCH_PRODUCTS",payload:n.data.products}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}})(D),M=(a(78),function(e){var t=Object(o.f)();return r.a.useEffect((function(){t.push("/login")}),[]),r.a.createElement("div",{className:"App"},r.a.createElement(i,null),r.a.createElement(o.c,null,r.a.createElement(o.a,{path:"/login",component:P,exact:!0}),r.a.createElement(o.a,{path:"/",component:I,exact:!0}),r.a.createElement(o.a,{path:"/cart",component:k,exact:!0}),r.a.createElement(o.a,{path:"/checkout",component:C})))}),S=[],q=function(e,t){console.log("adding item..");for(var a=Object(p.a)(e),n=0;n<e.length;n++)if(e[n]._id===t._id)return a[n].quantity+=1,console.log(e),a;return[].concat(Object(p.a)(e),[Object(m.a)(Object(m.a)({},t),{},{quantity:1})])},W=function(e,t){return e.filter((function(e){return e._id!==t._id||e.quantity>1&&(e.quantity-=1,!0)}))},B=function(e,t){return e.filter((function(e){return e._id!==t._id}))},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TO_CART":return q(e,t.payload);case"REMOVE_FROM_CART":return W(e,t.payload);case"REMOVE_WHOLE_ITEM":return B(e,t.payload);case"EMPTY_CART":return console.log("here"),t.payload;default:return e}},H=[],L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_PRODUCTS":return console.log(t.payload),t.payload;default:return e}},V={},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"STORE_CRED":return console.log(t.payload),t.payload.data;default:return e}},Q=a(11),$=Object(Q.c)({cart:F,products:L,cred:Y}),J=[a(42).a],U=Object(Q.e)($,{},Object(Q.d)(Q.a.apply(void 0,J)));l.a.render(r.a.createElement(u.a,{store:U},r.a.createElement(s.a,null,r.a.createElement(M,null))),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.d3d41a66.chunk.js.map