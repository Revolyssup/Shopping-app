(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{43:function(e,t,a){e.exports=a(80)},48:function(e,t,a){},50:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(24),l=a.n(c),o=(a(48),a(5)),u=a.n(o),s=a(12),i=a(14),p=a(2),m=(a(50),a(3)),d=a(10),E=Object(m.b)((function(e){return{cart:e.cart}}),null)((function(e){return r.a.createElement("nav",{className:"NavBar-Wrapper"},r.a.createElement("div",null,r.a.createElement(d.b,{to:"/",className:"navbutton"},r.a.createElement("span",null,"Shop"))),r.a.createElement("div",null,r.a.createElement(d.b,{to:"/cart",className:"navbutton"},r.a.createElement("span",null,r.a.createElement("span",null,e.cart.length),r.a.createElement("i",{className:"fa fa-shopping-bag"}),r.a.createElement("p",null,"Cart: $",function(e){var t=e.reduce((function(e,t){return e+t.price*t.quantity}),0);return console.log("ans",t),t}(e.cart))))),r.a.createElement("div",null,r.a.createElement(d.b,{to:"/login",className:"navbutton"},r.a.createElement("span",null,"Logout"))))})),f=a(21),h=a(15),v=a(17),b=a(18),g=a(20),y=a(19),O=a(11),j=a.n(O),C=function(e,t){return console.log(e),{type:"ADD_TO_CART",payload:e,index:t}},k=function(e){return r.a.createElement("div",null,r.a.createElement("h1",{className:"recieved"},"All previous orders recieved"),r.a.createElement("h2",{className:"back"},"You have nothing in cart."))},N=(a(73),function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(v.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).emptycart=function(t){console.log(e.props.cart),e.props.cred.orders,j.a.post("/api/orders",Object(h.a)(Object(h.a)({},e.props.cred),{},{orders:Object(f.a)(e.props.cart)}),{headers:{"x-token":localStorage.getItem("jwt")}}),e.props.emptyCart()},e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){console.log(this.props.cart)}},{key:"render",value:function(){if(!this.props.cart.length)return r.a.createElement(k,null);var e=this.props.cart.map((function(e){return r.a.createElement("tr",null,r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.price),r.a.createElement("td",null,e.quantity))}));return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h1",{className:"Checkout-Title"},"Your Order"),r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Name"),r.a.createElement("td",null,"Price"),r.a.createElement("td",null,"quantity"))),r.a.createElement("tbody",null,e))),r.a.createElement("button",{className:"button",onClick:this.emptycart},"Buy Now"))}}]),a}(n.Component)),T=Object(m.b)((function(e){return{cart:e.cart,cred:e.cred}}),{emptyCart:function(){return{type:"EMPTY_CART",payload:[]}}})(N),x=(a(74),a(75),function(e){return r.a.createElement(n.Fragment,null,r.a.createElement("tr",null,r.a.createElement("td",null," ",r.a.createElement("image",{className:"Cart-Item-Photo",src:e.photo,alt:e.name})," "),r.a.createElement("td",null,e.name),r.a.createElement("td",null,r.a.createElement("button",{onClick:e.addItem,className:"Quantity-Button"},"+"),r.a.createElement("span",null,e.quantity),r.a.createElement("button",{onClick:e.removeItem,className:"Quantity-Button"},"-")),r.a.createElement("td",null,e.price),r.a.createElement("td",{className:"fa fa-times",onClick:e.removeWholeItem,style:{color:"red",cursor:"pointer"}}," DELETE :(")))}),w=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(){return Object(v.a)(this,a),t.apply(this,arguments)}return Object(b.a)(a,[{key:"render",value:function(){var e=this;if(!this.props.cart.length)return r.a.createElement(k,null);var t,a=(t=this.props.cart,t.sort((function(e,t){return e._id<t._id}))).map((function(t,a){return r.a.createElement(x,Object.assign({key:a},t,{addItem:function(){return e.props.addToCart(t,a)},removeItem:function(){return e.props.deleteFromCart(t)},removeWholeItem:function(){return e.props.deleteWholeItem(t)}}))}));return r.a.createElement("div",null,r.a.createElement("h1",{className:"My-Cart-Title"},"My Cart"),r.a.createElement("div",{className:"Cart-Products-Wrapper"},r.a.createElement("table",{className:"Cart-Table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Photo"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Quantity"),r.a.createElement("th",null,"Price"))),r.a.createElement("tbody",null,a,r.a.createElement("tr",null,r.a.createElement("td",{style:{verticalAlign:0,paddingTop:"1rem",fontWeight:"bold"}},"Total"),r.a.createElement("td",null),r.a.createElement("td",null),r.a.createElement("td",null,r.a.createElement("p",{className:"Total-Price"},"$",this.props.cart.reduce((function(e,t){return e+t.price*t.quantity}),0)),r.a.createElement(d.b,{to:"/checkout",className:"Checkout-Button-Text"},r.a.createElement("div",{className:"Checkout-Button"},"Checkout"))))))))}}]),a}(n.Component),_=Object(m.b)((function(e){return{cart:e.cart}}),{addToCart:C,deleteFromCart:function(e){return{type:"REMOVE_FROM_CART",payload:e}},deleteWholeItem:function(e,t){return{type:"REMOVE_WHOLE_ITEM",payload:e}}})(w),I=(a(76),Object(m.b)(null,{login:function(e,t){return function(){var a=Object(s.a)(u.a.mark((function a(n){var r,c;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!t){a.next=14;break}return a.prev=1,a.next=4,j.a.post("/auth/signup",e);case 4:r=a.sent,localStorage.setItem("jwt",r.data.accessToken),n({type:"STORE_CRED",payload:r}),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(1),console.log(a.t0);case 12:a.next=25;break;case 14:return a.prev=14,a.next=17,j.a.post("/auth/login",e);case 17:c=a.sent,localStorage.setItem("jwt",c.data.accessToken),n({type:"STORE_CRED",payload:c}),a.next=25;break;case 22:a.prev=22,a.t1=a.catch(14),console.log(a.t1);case 25:case"end":return a.stop()}}),a,null,[[1,9],[14,22]])})));return function(e){return a.apply(this,arguments)}}()}})((function(e){var t=Object(p.f)(),a=Object(n.useState)(null),c=Object(i.a)(a,2),l=c[0],o=c[1],m=Object(n.useState)(null),d=Object(i.a)(m,2),E=d[0],f=d[1],h=Object(n.useState)(null),v=Object(i.a)(h,2),b=v[0],g=v[1],y=Object(n.useState)(null),O=Object(i.a)(y,2),j=O[0],C=O[1],k=Object(n.useState)(null),N=Object(i.a)(k,2),T=N[0],x=N[1],w=function(e){console.log("changed"),o(e.target.value)},_=function(e){g(e.target.value)},I=function(e){x(e.target.value)},P=function(){var a=Object(s.a)(u.a.mark((function a(n){var r;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n.preventDefault(),r={name:l,email:E,address:b,phone:j,password:T},console.log(r),a.next=5,e.login(r,!0);case 5:t.push("/");case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),R=function(){var a=Object(s.a)(u.a.mark((function a(n){var r;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n.preventDefault(),r={name:l,password:T},console.log(r),a.next=5,e.login(r,!1);case 5:t.push("/");case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"login"},r.a.createElement("form",null,r.a.createElement("input",{placeholder:"Enter Name",type:"text",onChange:w}),r.a.createElement("input",{placeholder:"Enter password",type:"password",onChange:I}),r.a.createElement("button",{className:"button",onClick:R},"Login"))),r.a.createElement("div",{className:"signup"},r.a.createElement("br",null),r.a.createElement("form",null,r.a.createElement("input",{placeholder:"Enter name",type:"text",onChange:w}),r.a.createElement("input",{placeholder:"Enter Email-id",type:"text",onChange:function(e){f(e.target.value)}}),r.a.createElement("input",{placeholder:"Enter Address",type:"text",onChange:function(){return _}}),r.a.createElement("input",{placeholder:"Enter phone number",type:"text",onChange:function(e){C(e.target.value)}}),r.a.createElement("input",{placeholder:"Enter Password",type:"password",onChange:I}),r.a.createElement("button",{className:"button",onClick:P},"Signup"))))}))),P=(a(77),a(78),function(e){return r.a.createElement("div",{className:"Product-wrapper"},r.a.createElement("div",{className:"Product"},r.a.createElement("div",{className:"Product-image"},r.a.createElement("img",{src:e.photo})),r.a.createElement("div",{className:"Product-name"},e.name),r.a.createElement("div",{className:"Product-details"},r.a.createElement("small",{className:"price"},"$",e.price),r.a.createElement("button",{onClick:e.addToCart,className:"button"},"Add to Cart"))))}),R=Object(m.b)((function(e){return{cart:e.cart}}),{addToCart:C})((function(e){var t=e.products.map((function(t,a){return r.a.createElement(P,Object.assign({key:t._id},t,{addToCart:function(){return e.addToCart(t,a)}}))}));return r.a.createElement("div",null,r.a.createElement("h1",{className:"banner"},"Happy shopping!!"),r.a.createElement("div",{className:"Products-container"},r.a.createElement("div",{className:"Products-wrapper"},t)))})),S=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(){return Object(v.a)(this,a),t.apply(this,arguments)}return Object(b.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.cred;console.log(e.accessToken),this.props.fetchProducts(e.accessToken)}},{key:"render",value:function(){return r.a.createElement("main",null,r.a.createElement(R,{products:this.props.products}))}}]),a}(n.Component),A=Object(m.b)((function(e){return{products:e.products,cred:e.cred}}),{fetchProducts:function(e){return function(){var t=Object(s.a)(u.a.mark((function t(a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log(e),t.next=4,j.a.get("/api/products",{headers:{"x-token":localStorage.getItem("jwt")}});case 4:n=t.sent,console.log(n.data.products),a({type:"FETCH_PRODUCTS",payload:n.data.products}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}})(S),D=(a(79),function(e){var t=Object(p.f)(),a=Object(n.useState)(!0),c=Object(i.a)(a,2),l=c[0],o=c[1];return Object(n.useEffect)((function(){function e(){return(e=Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j()({method:"get",url:"/check",headers:{"x-token":localStorage.getItem("jwt")}});case 3:t.push("/"),console.log("In try"),e.next=12;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("here in as"),t.push("/login"),console.log("In catch");case 12:return e.prev=12,o(!1),console.log("In finally"),e.finish(12);case 16:case"end":return e.stop()}}),e,null,[[0,7,12,16]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()})),l?null:r.a.createElement("div",{className:"App"},r.a.createElement(E,null),r.a.createElement(p.c,null,r.a.createElement(p.a,{path:"/login",component:I,exact:!0}),r.a.createElement(p.a,{path:"/",component:A,exact:!0}),r.a.createElement(p.a,{path:"/cart",component:_,exact:!0}),r.a.createElement(p.a,{path:"/checkout",component:T})))}),M=[],q=function(e,t){console.log("adding item..");for(var a=Object(f.a)(e),n=0;n<e.length;n++)if(e[n]._id===t._id)return a[n].quantity+=1,console.log(e),a;return[].concat(Object(f.a)(e),[Object(h.a)(Object(h.a)({},t),{},{quantity:1})])},W=function(e,t){return e.filter((function(e){return e._id!==t._id||e.quantity>1&&(e.quantity-=1,!0)}))},B=function(e,t){return e.filter((function(e){return e._id!==t._id}))},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TO_CART":return q(e,t.payload);case"REMOVE_FROM_CART":return W(e,t.payload);case"REMOVE_WHOLE_ITEM":return B(e,t.payload);case"EMPTY_CART":return console.log("here"),t.payload;default:return e}},H=[],L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_PRODUCTS":return console.log(t.payload),t.payload;default:return e}},V={},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"STORE_CRED":return console.log(t.payload),t.payload.data;default:return e}},Q=a(13),$=Object(Q.c)({cart:F,products:L,cred:Y}),J=[a(42).a],U=Object(Q.e)($,{},Object(Q.d)(Q.a.apply(void 0,J)));l.a.render(r.a.createElement(m.a,{store:U},r.a.createElement(d.a,null,r.a.createElement(D,null))),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.0e7a4948.chunk.js.map