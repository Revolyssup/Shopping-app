(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{197:function(e,t,n){e.exports=n(428)},202:function(e,t,n){},204:function(e,t,n){},226:function(e,t,n){},227:function(e,t,n){},228:function(e,t,n){},229:function(e,t,n){},230:function(e,t,n){},231:function(e,t,n){},232:function(e,t,n){},262:function(e,t){},263:function(e,t){},267:function(e,t){},269:function(e,t){},308:function(e,t){},313:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=313},315:function(e,t){},317:function(e,t){},327:function(e,t){},329:function(e,t){},357:function(e,t){},359:function(e,t){},360:function(e,t){},366:function(e,t){},368:function(e,t){},386:function(e,t){},389:function(e,t){},405:function(e,t){},408:function(e,t){},428:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(77),o=n.n(c),l=(n(202),n(10)),u=n.n(l),s=n(24),i=n(31),p=n(7),m=(n(204),n(8)),d=n(23),f=Object(m.b)((function(e){return{cart:e.cart}}),null)((function(e){return r.a.createElement("nav",{className:"NavBar-Wrapper"},r.a.createElement("div",null,r.a.createElement(d.b,{to:"/"},r.a.createElement("p",{className:"shop"},"Shop"))),r.a.createElement(d.b,{to:"/cart"},r.a.createElement("div",{className:"Cart-Info"},r.a.createElement("span",{className:"Cart-Item-Counter"},e.cart.length),r.a.createElement("i",{className:"fa fa-shopping-bag"}),r.a.createElement("p",null,"Cart: $",function(e){var t=e.reduce((function(e,t){return e+t.price*t.quantity}),0);return console.log("ans",t),t}(e.cart)))))})),E=n(32),h=n(33),b=n(45),v=n(46),g=n(48),y=n(47),O=n(20),j=n.n(O),C=function(e,t){return console.log(e),{type:"ADD_TO_CART",payload:e,index:t}},k=function(e){return r.a.createElement("div",null,r.a.createElement("h1",{className:"recieved"},"All previous orders recieved"),r.a.createElement("h2",{className:"back"},"You have nothing in cart."))},N=(n(226),function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(b.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).emptycart=function(t){e.props.cred.orders?j.a.post("/api/orders",Object(h.a)(Object(h.a)({},e.props.cred),{},{orders:[].concat(Object(E.a)(e.props.cred.orders),Object(E.a)(e.props.cart))}),{headers:{"x-token":localStorage.getItem("jwt")}}):j.a.post("/api/orders",Object(h.a)(Object(h.a)({},e.props.cred._doc.orders),{},{orders:[].concat(Object(E.a)(e.props.cred._doc.orders),Object(E.a)(e.props.cart))}),{headers:{"x-token":localStorage.getItem("jwt")}}),e.props.emptyCart()},e}return Object(v.a)(n,[{key:"componentDidMount",value:function(){console.log(this.props.cart)}},{key:"render",value:function(){if(!this.props.cart.length)return r.a.createElement(k,null);var e=this.props.cart.map((function(e){return r.a.createElement("tr",null,r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.price),r.a.createElement("td",null,e.quantity))}));return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h1",{className:"Checkout-Title"},"Your Order"),r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Name"),r.a.createElement("td",null,"Price"),r.a.createElement("td",null,"quantity"))),r.a.createElement("tbody",null,e))),r.a.createElement("button",{className:"button",onClick:this.emptycart},"Buy Now"))}}]),n}(a.Component)),T=Object(m.b)((function(e){return{cart:e.cart,cred:e.cred}}),{emptyCart:function(){return{type:"EMPTY_CART",payload:[]}}})(N),w=(n(227),n(228),function(e){return r.a.createElement(a.Fragment,null,r.a.createElement("tr",null,r.a.createElement("td",null," ",r.a.createElement("image",{className:"Cart-Item-Photo",src:e.photo,alt:e.name})," "),r.a.createElement("td",null,e.name),r.a.createElement("td",null,r.a.createElement("button",{onClick:e.addItem,className:"Quantity-Button"},"+"),r.a.createElement("span",null,e.quantity),r.a.createElement("button",{onClick:e.removeItem,className:"Quantity-Button"},"-")),r.a.createElement("td",null,e.price),r.a.createElement("td",{className:"fa fa-times",onClick:e.removeWholeItem,style:{color:"red",cursor:"pointer"}}," DELETE :(")))}),x=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(v.a)(n,[{key:"render",value:function(){var e=this;if(!this.props.cart.length)return r.a.createElement(k,null);var t,n=(t=this.props.cart,t.sort((function(e,t){return e._id<t._id}))).map((function(t,n){return r.a.createElement(w,Object.assign({key:n},t,{addItem:function(){return e.props.addToCart(t,n)},removeItem:function(){return e.props.deleteFromCart(t)},removeWholeItem:function(){return e.props.deleteWholeItem(t)}}))}));return r.a.createElement("div",null,r.a.createElement("h1",{className:"My-Cart-Title"},"My Cart"),r.a.createElement("div",{className:"Cart-Products-Wrapper"},r.a.createElement("table",{className:"Cart-Table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Photo"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Quantity"),r.a.createElement("th",null,"Price"))),r.a.createElement("tbody",null,n,r.a.createElement("tr",null,r.a.createElement("td",{style:{verticalAlign:0,paddingTop:"1rem",fontWeight:"bold"}},"Total"),r.a.createElement("td",null),r.a.createElement("td",null),r.a.createElement("td",null,r.a.createElement("p",{className:"Total-Price"},"$",this.props.cart.reduce((function(e,t){return e+t.price*t.quantity}),0)),r.a.createElement(d.b,{to:"/checkout",className:"Checkout-Button-Text"},r.a.createElement("div",{className:"Checkout-Button"},"Checkout"))))))))}}]),n}(a.Component),_=Object(m.b)((function(e){return{cart:e.cart}}),{addToCart:C,deleteFromCart:function(e){return{type:"REMOVE_FROM_CART",payload:e}},deleteWholeItem:function(e,t){return{type:"REMOVE_WHOLE_ITEM",payload:e}}})(x),P=(n(229),Object(m.b)(null,{login:function(e,t){return function(){var n=Object(s.a)(u.a.mark((function n(a){var r,c;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t){n.next=14;break}return n.prev=1,n.next=4,j.a.post("/auth/signup",e);case 4:r=n.sent,localStorage.setItem("jwt",r.data.accessToken),a({type:"STORE_CRED",payload:r}),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),console.log(n.t0);case 12:n.next=25;break;case 14:return n.prev=14,n.next=17,j.a.post("/auth/login",e);case 17:c=n.sent,localStorage.setItem("jwt",c.data.accessToken),a({type:"STORE_CRED",payload:c}),n.next=25;break;case 22:n.prev=22,n.t1=n.catch(14),console.log(n.t1);case 25:case"end":return n.stop()}}),n,null,[[1,9],[14,22]])})));return function(e){return n.apply(this,arguments)}}()}})((function(e){var t=Object(p.f)(),n=Object(a.useState)(null),c=Object(i.a)(n,2),o=c[0],l=c[1],m=Object(a.useState)(null),d=Object(i.a)(m,2),f=d[0],E=d[1],h=Object(a.useState)(null),b=Object(i.a)(h,2),v=b[0],g=b[1],y=Object(a.useState)(null),O=Object(i.a)(y,2),j=O[0],C=O[1],k=Object(a.useState)(null),N=Object(i.a)(k,2),T=N[0],w=N[1],x=function(e){console.log("changed"),l(e.target.value)},_=function(e){g(e.target.value)},P=function(e){w(e.target.value)},R=function(){var n=Object(s.a)(u.a.mark((function n(a){var r;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a.preventDefault(),r={name:o,email:f,address:v,phone:j,password:T},console.log(r),n.next=5,e.login(r,!0);case 5:t.push("/");case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),I=function(){var n=Object(s.a)(u.a.mark((function n(a){var r;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a.preventDefault(),r={name:o,password:T},console.log(r),n.next=5,e.login(r,!1);case 5:t.push("/");case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"login"},r.a.createElement("form",null,r.a.createElement("input",{placeholder:"Enter Name",type:"text",onChange:x}),r.a.createElement("input",{placeholder:"Enter password",type:"password",onChange:P}),r.a.createElement("button",{className:"button",onClick:I},"Login"))),r.a.createElement("div",{className:"signup"},r.a.createElement("br",null),r.a.createElement("form",null,r.a.createElement("input",{placeholder:"Enter name",type:"text",onChange:x}),r.a.createElement("input",{placeholder:"Enter Email-id",type:"text",onChange:function(e){E(e.target.value)}}),r.a.createElement("input",{placeholder:"Enter Address",type:"text",onChange:function(){return _}}),r.a.createElement("input",{placeholder:"Enter phone number",type:"text",onChange:function(e){C(e.target.value)}}),r.a.createElement("input",{placeholder:"Enter Password",type:"password",onChange:P}),r.a.createElement("button",{className:"button",onClick:R},"Signup"))))}))),R=(n(230),n(231),function(e){return r.a.createElement("div",{className:"Product-wrapper"},r.a.createElement("div",{className:"Product"},r.a.createElement("div",{className:"Product-image"},r.a.createElement("img",{src:e.photo})),r.a.createElement("div",{className:"Product-name"},e.name),r.a.createElement("div",{className:"Product-details"},r.a.createElement("small",{className:"price"},"$",e.price),r.a.createElement("button",{onClick:e.addToCart,className:"button"},"Add to Cart"))))}),I=Object(m.b)((function(e){return{cart:e.cart}}),{addToCart:C})((function(e){var t=e.products.map((function(t,n){return r.a.createElement(R,Object.assign({key:t._id},t,{addToCart:function(){return e.addToCart(t,n)}}))}));return r.a.createElement("div",null,r.a.createElement("h1",null,"Happy shopping!!"),r.a.createElement("div",{className:"Products-container"},r.a.createElement("div",{className:"Products-wrapper"},t)))})),S=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(v.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.cred;console.log(e.accessToken),this.props.fetchProducts(e.accessToken)}},{key:"render",value:function(){return r.a.createElement("main",null,r.a.createElement(I,{products:this.props.products}))}}]),n}(a.Component),D=Object(m.b)((function(e){return{products:e.products,cred:e.cred}}),{fetchProducts:function(e){return function(){var t=Object(s.a)(u.a.mark((function t(n){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log(e),t.next=4,j.a.get("/api/products",{headers:{"X-token":e}});case 4:a=t.sent,console.log(a.data.products),n({type:"FETCH_PRODUCTS",payload:a.data.products}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}})(S),M=(n(232),n(233),function(e){var t=Object(p.f)(),n=Object(a.useState)(!0),c=Object(i.a)(n,2),o=c[0],l=c[1];return Object(a.useEffect)((function(){function e(){return(e=Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j()({method:"get",url:"/check",headers:{"x-token":localStorage.getItem("jwt")}});case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),t.push("/login"),l(!1);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()})),console.log("here in as"),o?null:r.a.createElement("div",{className:"App"},r.a.createElement(f,null),r.a.createElement(p.c,null,r.a.createElement(p.a,{path:"/login",component:P,exact:!0}),r.a.createElement(p.a,{path:"/",component:D,exact:!0}),r.a.createElement(p.a,{path:"/cart",component:_,exact:!0}),r.a.createElement(p.a,{path:"/checkout",component:T})))}),A=[],q=function(e,t){console.log("adding item..");for(var n=Object(E.a)(e),a=0;a<e.length;a++)if(e[a]._id===t._id)return n[a].quantity+=1,console.log(e),n;return[].concat(Object(E.a)(e),[Object(h.a)(Object(h.a)({},t),{},{quantity:1})])},W=function(e,t){return e.filter((function(e){return e._id!==t._id||e.quantity>1&&(e.quantity-=1,!0)}))},F=function(e,t){return e.filter((function(e){return e._id!==t._id}))},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TO_CART":return q(e,t.payload);case"REMOVE_FROM_CART":return W(e,t.payload);case"REMOVE_WHOLE_ITEM":return F(e,t.payload);case"EMPTY_CART":return console.log("here"),t.payload;default:return e}},H=[],L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_PRODUCTS":return console.log(t.payload),t.payload;default:return e}},U={},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"STORE_CRED":return console.log(t.payload),t.payload.data;default:return e}},Y=n(30),Q=Object(Y.c)({cart:B,products:L,cred:V}),$=[n(196).a],J=Object(Y.e)(Q,{},Object(Y.d)(Y.a.apply(void 0,$)));o.a.render(r.a.createElement(m.a,{store:J},r.a.createElement(d.a,null,r.a.createElement(M,null))),document.getElementById("root"))}},[[197,1,2]]]);
//# sourceMappingURL=main.27dd153a.chunk.js.map